<html>
<head>
<meta charset="utf-8">
</head>
<body>
	<section class="content-header">
		<h1>Consulta de Dispositivos</h1>
		<ol class="breadcrumb">
			<li><a> <i class="{{breadCrumbs.icono}}"></i>Dispositivos</a></li>
			<li class="active">Consulta de Dispositivos</li>
		</ol>
	</section>
<section class="content">
	<div class="row">
		<div class="col-md-offset-2 col-md-8">
			<div class="box box-danger collapsed-box">
				<div class="box-header with-border center">
					<h2 class="box-title">Parámetros de Búsqueda</h2>
					<div class="box-tools pull-right">
						<button type="button" class="btn btn-box-tool" data-widget="collapse">
							<i class="fa fa-plus"></i>
						</button>
					</div>
				</div>
<!-- {{dispositivo}} -->
				<div class="box-body">
					<div class="row centerCol">
						<div class="col-md-12">
							<form role="form" name="dispoInfoForm" novalidate>
								<div class="row">
									<div class="col-md-4">
										<div class="form-group">
											<label for="numSerie">Número de Serie:</label>
											<div class="input-group">
												<span class="input-group-addon">
													<i class="fa fa-sort-numeric-asc"></i>
												</span>
												<input type="text" class="form-control" id="numSerie" name="numSerie" ng-model="dispositivo.numSerie"  maxlength="45" integer-number>
											</div>
										</div>
									</div>
									<div class="col-md-4">
										<div class="form-group">
											<label for="numSim">Número Sim:</label>
											<div class="input-group">
												<span class="input-group-addon">
													<i class="fa fa-cog"></i>
												</span>
												<input type="text" class="form-control" id="numSim" name="numSim" ng-model="dispositivo.numSim"  maxlength="45">
											</div>
										</div>
									</div>
									<div class="col-md-4">
										<div class="form-group" ng-class="{'has-error': dispoInfoForm.numIp.$dirty && dispoInfoForm.numIp.$invalid}">
											<label for="numSim">IP:</label>
											<div class="input-group">
												<span class="input-group-addon">
													<i class="fa fa-map-marker"></i>
												</span>
												<input type="text" class="form-control" id="numIp" name="numIp" ng-model="dispositivo.numIp"  maxlength="45"
												ng-pattern='/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/'>
											</div>
											<div ng-show="dispoInfoForm.numIp.$dirty && dispoInfoForm.numIp.$invalid" ng-style="{color:'red'}">Formato de IP incorrecto</div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-4">
										<div class="form-group">
											<label for="marca">Marca:</label>
											<div class="input-group">
												<span class="input-group-addon">
													<i class="fa fa-adjust"></i>
												</span>
												<select ng-options="item as item.marca.marca for item in catalogo.marcasModelos"
												select-picker multiple
												id="marca"
												name="marca"
												class="form-control"
												data-actions-box="true"
												data-selected-text-format="count > 2"
												ng-model="dispositivo.marcas"
												ng-change="cambiaMarca()">
												</select>
											</div>
										</div>
									</div>
<!-- 									{{marcasSelected}} -->
									<div class="col-md-4">
										<div class="form-group">
											<label for="modelo">Modelo:</label>
											<div class="input-group">
												<span class="input-group-addon">
													<i class="fa fa-bullseye"></i>
												</span>
												<select  ng-disabled="catalogo.modelos.length == 0"
													ng-options="modelo.modeloId as modelo.modelo for modelo in catalogo.modelos"
													select-picker multiple
													id="modelo"
													name="modelo"
													class="form-control"
													data-actions-box="true"
													data-selected-text-format="count > 2"
													ng-model="dispositivo.modelos">
												</select>
											</div>
										</div>
<!-- 										{{dispositivo.modelos}} -->
									</div>
									<div class="col-md-4">
										<div class="form-group">
											<label for="tipoDispositivo">Tipo de Dispositivo:</label>
											<div class="input-group">
												<span class="input-group-addon">
													<i class="fa fa-mobile"></i>
												</span>
												<select  ng-options="item.idTipoDispositivo as item.tipoDispositivo for item in catalogo.tiposDispositivos"
												select-picker multiple
												id="tipoDispositivo"
												name="tipoDispositivo"
												class="form-control"
												data-actions-box="true"
												data-selected-text-format="count > 2"
												ng-model="dispositivo.tipoDispositivo">
												</select>
											</div>
										</div>
									</div>
								</div>
								<div class="row">
<!-- 								{{catalogo.zonasViales}} -->
									<div class="col-sm-4">
										<div class="form-group">
											<label for="zonaVial">Zona Vial:</label>
											<div class="input-group">
												<span class="input-group-addon">
													<i class="fa fa-map-pin"></i>
												</span>
												<select  ng-options="item.idZonaVial as item.nombreZonaVial for item in catalogo.zonasViales"
												select-picker multiple
												id="zonaVial"
												name="zonaVial"
												class="form-control"
												data-actions-box="true"
												data-selected-text-format="count > 2"
												ng-model="dispositivo.zonaVial"
												ng-change="cambiaZona()">
												</select>
											</div>
										</div>
									</div>
									<div class="col-sm-8">
										<div class="form-group">
											<label for="stApilable">Incluir dispositivos por complementar: </label>
											<div class="input-group">
												<switcher class="swTeclo pull-right" id-check="checkTest1"
													true-label="Si"
													true-value="true"
													false-label="No"
													false-value="false"
													ng-model="dispositivo.complementacion">
												</switcher>
											</div>
										</div>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
				<div class="box-footer">
					<div class="row">
						<div class="col-md-12 text-center">
							<button class="btn btn-md btn-danger" ng-click="reset()">Limpiar</button>
							<button class="btn btn-md btn-danger" ng-click="validRequest()">Buscar</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<br>
<!-- 	{{dispositivo}} -->
	<div class="row" ng-show="deviceRecords.dispositivos.length > 0">
		<div class="col-md-12">
			<div class="box box-danger">

					<div class="box-header">
						<div class="col-md-6 col-xs-12">
							<h3 class="box-title">
								Dispositivos Encontrados: <span>{{ (deviceRecords.dispositivos | filter:fBus).length }}</span>
							</h3>
						</div>
						<div class="col-md-6 form-group">
							<div class="row">
								<div class="col-md-offset-6 col-md-6 col-xs-8">
									<div class="input-group">
										<input id="searchsomething" type="text" class="form-control" placeholder="Buscar por filtro" ng-model="fBus"> <span
											class="input-group-addon"><i class="fa fa-search"></i></span>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="box-body ">
						<div class="row">
							<div class="col-md-12 table-responsive">
								<table id="garantiasTable" class="table table-hover header-fixed table-striped table-condensed">
									<thead>
										<tr>
											<th sort order="'folio'" by="order" reverse="reverse">NÚM. SERIE</th>
											<th sort order="'folio'" by="order" reverse="reverse">SIM</th>
											<th sort order="'txEmpresa'" by="order" reverse="reverse">IP</th>
											<th class="wrap-text center" sort order="'txTipoInspec'" by="order" reverse="reverse">MARCA</th>
											<th class="center" sort order="'txDireccion'" by="order" reverse="reverse">MODELO</th>
											<th class="center" sort order="'txDireccion'" by="order" reverse="reverse">TIPO DISPOSITIVO</th>
											<th class="center" sort order="'txDireccion'" by="order" reverse="reverse">ZONA VIAL</th>
										</tr>
									</thead>
									<tbody>
										<tr dir-paginate="obj in deviceRecords.dispositivos | filter:fBus  | orderBy:order:reverse | itemsPerPage: view.rowsPerPage ">
											<td><a href="#/editaDispositivo/{{obj}}">{{obj.numSerie}}</a></td>
											<td class="center">{{obj.numSim}}</td>
											<td class="center">{{obj.numIp}}</td>
											<td class="center">{{obj.dispositivoModelo.modeloMarca.marca}}</td>
											<td class="center">{{obj.dispositivoModelo.modeloCodigo}}</td>
											<td class="center">{{obj.dispositivoMovil.tipoDispositivo}}</td>
											<td class="center">{{obj.zonaVial}}</td>
										</tr>
										<tr ng-if="(tipoSeguimiento | filter:fBus).length < 1">
											<td colspan="5" class="text-center">
												<h4>No se encontraron coincidencias</h4>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
							<div class="container-fluid">
								<div class="fixed-table-pagination" style="display: block;">
									<rows-per-page rows="view.rowsPerPage" filtro="fBus"
										array="tipoSeguimiento"></rows-per-page>
									<div class="pull-right pagination">
										<dir-pagination-controls class="pagination"></dir-pagination-controls>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
<!-- 		{{deviceRecords}} -->

</section>